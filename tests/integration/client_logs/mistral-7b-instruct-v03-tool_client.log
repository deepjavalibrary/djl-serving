req {'messages': [{'role': 'user', 'content': 'Hi! How are you doing today?'}, {'role': 'assistant', 'content': "I'm doing well! How can I help you?"}, {'role': 'user', 'content': 'Can you tell me what the temperate will be in Dallas, in fahrenheit?'}], 'tools': [{'type': 'function', 'function': {'name': 'get_current_weather', 'description': 'Get the current weather in a given location', 'parameters': {'type': 'object', 'properties': {'city': {'type': 'string', 'description': "The city to find the weather for, e.g. 'San Francisco'"}, 'state': {'type': 'string', 'description': "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, 'unit': {'type': 'string', 'description': 'The unit to fetch the temperature in', 'enum': ['celsius', 'fahrenheit']}}, 'required': ['city', 'state', 'unit']}}}], 'tool_choice': 'auto', 'max_tokens': 256, 'logprobs': True, 'top_logprobs': 1, 'stream': False}
res: b'{"id":"chatcmpl-2e456193e1b343c8b2fcd8c45c656b9d","object":"chat.completion","created":1758065504,"model":"lmi","choices":[{"index":0,"message":{"role":"assistant","content":null,"refusal":null,"annotations":null,"audio":null,"function_call":null,"tool_calls":[{"id":"JOUdaBjZo","type":"function","function":{"name":"get_current_weather","arguments":"{\\"city\\": \\"Dallas\\", \\"state\\": \\"TX\\", \\"unit\\": \\"fahrenheit\\"}"}}],"reasoning_content":null},"logprobs":{"content":[{"token":"[TOOL_CALLS]","logprob":-0.005899753887206316,"bytes":[91,84,79,79,76,95,67,65,76,76,83,93],"top_logprobs":[{"token":"[TOOL_CALLS]","logprob":-0.005899753887206316,"bytes":[91,84,79,79,76,95,67,65,76,76,83,93]}]},{"token":"[","logprob":-0.00002312633478140924,"bytes":[91],"top_logprobs":[{"token":"[","logprob":-0.00002312633478140924,"bytes":[91]}]},{"token":"{\\"","logprob":-0.000026702524337451905,"bytes":[123,34],"top_logprobs":[{"token":"{\\"","logprob":-0.000026702524337451905,"bytes":[123,34]}]},{"token":"name","logprob":-0.00002288792165927589,"bytes":[110,97,109,101],"top_logprobs":[{"token":"name","logprob":-0.00002288792165927589,"bytes":[110,97,109,101]}]},{"token":"\\":","logprob":-9.65590606938349e-6,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-9.65590606938349e-6,"bytes":[34,58]}]},{"token":"\\"","logprob":-1.311301275563892e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-1.311301275563892e-6,"bytes":[34]}]},{"token":"get","logprob":-3.4570634852570947e-6,"bytes":[103,101,116],"top_logprobs":[{"token":"get","logprob":-3.4570634852570947e-6,"bytes":[103,101,116]}]},{"token":"_","logprob":-0.00015877417172305286,"bytes":[95],"top_logprobs":[{"token":"_","logprob":-0.00015877417172305286,"bytes":[95]}]},{"token":"current","logprob":-9.536738616588991e-7,"bytes":[99,117,114,114,101,110,116],"top_logprobs":[{"token":"current","logprob":-9.536738616588991e-7,"bytes":[99,117,114,114,101,110,116]}]},{"token":"_","logprob":-2.0265558760002023e-6,"bytes":[95],"top_logprobs":[{"token":"_","logprob":-2.0265558760002023e-6,"bytes":[95]}]},{"token":"we","logprob":-2.3841855067985307e-7,"bytes":[119,101],"top_logprobs":[{"token":"we","logprob":-2.3841855067985307e-7,"bytes":[119,101]}]},{"token":"ather","logprob":-1.1920922133867862e-6,"bytes":[97,116,104,101,114],"top_logprobs":[{"token":"ather","logprob":-1.1920922133867862e-6,"bytes":[97,116,104,101,114]}]},{"token":"\\",","logprob":-0.000019073304429184645,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-0.000019073304429184645,"bytes":[34,44]}]},{"token":"\\"","logprob":-5.006777428206988e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-5.006777428206988e-6,"bytes":[34]}]},{"token":"arguments","logprob":-0.00011729506513802335,"bytes":[97,114,103,117,109,101,110,116,115],"top_logprobs":[{"token":"arguments","logprob":-0.00011729506513802335,"bytes":[97,114,103,117,109,101,110,116,115]}]},{"token":"\\":","logprob":-3.814689989667386e-6,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-3.814689989667386e-6,"bytes":[34,58]}]},{"token":"{\\"","logprob":-0.00015948931104503572,"bytes":[123,34],"top_logprobs":[{"token":"{\\"","logprob":-0.00015948931104503572,"bytes":[123,34]}]},{"token":"city","logprob":-0.000010847986231965479,"bytes":[99,105,116,121],"top_logprobs":[{"token":"city","logprob":-0.000010847986231965479,"bytes":[99,105,116,121]}]},{"token":"\\":","logprob":-0.00006842378934379667,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-0.00006842378934379667,"bytes":[34,58]}]},{"token":"\\"","logprob":-0.000013708974620385561,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-0.000013708974620385561,"bytes":[34]}]},{"token":"D","logprob":-0.001750366878695786,"bytes":[68],"top_logprobs":[{"token":"D","logprob":-0.001750366878695786,"bytes":[68]}]},{"token":"allas","logprob":-0.000011444026313256472,"bytes":[97,108,108,97,115],"top_logprobs":[{"token":"allas","logprob":-0.000011444026313256472,"bytes":[97,108,108,97,115]}]},{"token":"\\",","logprob":-0.00010787858627736568,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-0.00010787858627736568,"bytes":[34,44]}]},{"token":"\\"","logprob":-2.145764938177308e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-2.145764938177308e-6,"bytes":[34]}]},{"token":"state","logprob":-0.00007676783570786938,"bytes":[115,116,97,116,101],"top_logprobs":[{"token":"state","logprob":-0.00007676783570786938,"bytes":[115,116,97,116,101]}]},{"token":"\\":","logprob":-0.00014804698002990335,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-0.00014804698002990335,"bytes":[34,58]}]},{"token":"\\"","logprob":-4.887569048150908e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-4.887569048150908e-6,"bytes":[34]}]},{"token":"TX","logprob":-0.0008117241668514907,"bytes":[84,88],"top_logprobs":[{"token":"TX","logprob":-0.0008117241668514907,"bytes":[84,88]}]},{"token":"\\",","logprob":-0.000036954195820726454,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-0.000036954195820726454,"bytes":[34,44]}]},{"token":"\\"","logprob":-5.364403477869928e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-5.364403477869928e-6,"bytes":[34]}]},{"token":"unit","logprob":-1.4305104514278355e-6,"bytes":[117,110,105,116],"top_logprobs":[{"token":"unit","logprob":-1.4305104514278355e-6,"bytes":[117,110,105,116]}]},{"token":"\\":","logprob":-0.0001454247540095821,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-0.0001454247540095821,"bytes":[34,58]}]},{"token":"\\"","logprob":-7.867782187531702e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-7.867782187531702e-6,"bytes":[34]}]},{"token":"f","logprob":-0.00010466027742950246,"bytes":[102],"top_logprobs":[{"token":"f","logprob":-0.00010466027742950246,"bytes":[102]}]},{"token":"ahren","logprob":-0.000020265373677830212,"bytes":[97,104,114,101,110],"top_logprobs":[{"token":"ahren","logprob":-0.000020265373677830212,"bytes":[97,104,114,101,110]}]},{"token":"heit","logprob":-8.4638240878121e-6,"bytes":[104,101,105,116],"top_logprobs":[{"token":"heit","logprob":-8.4638240878121e-6,"bytes":[104,101,105,116]}]},{"token":"\\"","logprob":-0.00009703165414975956,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-0.00009703165414975956,"bytes":[34]}]},{"token":"}}","logprob":-0.00029213930247351527,"bytes":[125,125],"top_logprobs":[{"token":"}}","logprob":-0.00029213930247351527,"bytes":[125,125]}]},{"token":"]","logprob":-0.00008999896090244874,"bytes":[93],"top_logprobs":[{"token":"]","logprob":-0.00008999896090244874,"bytes":[93]}]},{"token":"</s>","logprob":-0.00306018372066319,"bytes":[60,47,115,62],"top_logprobs":[{"token":"</s>","logprob":-0.00306018372066319,"bytes":[60,47,115,62]}]}]},"finish_reason":"tool_calls","stop_reason":null,"token_ids":null}],"service_tier":null,"system_fingerprint":null,"usage":{"prompt_tokens":216,"total_tokens":256,"completion_tokens":40,"prompt_tokens_details":null},"prompt_logprobs":null,"prompt_token_ids":null,"kv_transfer_params":null}\n'
Little benchmark: concurrency 1 seq_len 256
Running command TOKENIZER=unsloth/mistral-7b-instruct-v0.3 ./awscurl -c 1 -N 5 -X POST http://127.0.0.1:8080/invocations --connect-timeout 300 -H 'Content-type: application/json' -d '{"messages": [{"role": "user", "content": "Hi! How are you doing today?"}, {"role": "assistant", "content": "I'm doing well! How can I help you?"}, {"role": "user", "content": "Can you tell me what the temperate will be in Dallas, in fahrenheit?"}], "tools": [{"type": "function", "function": {"name": "get_current_weather", "description": "Get the current weather in a given location", "parameters": {"type": "object", "properties": {"city": {"type": "string", "description": "The city to find the weather for, e.g. 'San Francisco'"}, "state": {"type": "string", "description": "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, "unit": {"type": "string", "description": "The unit to fetch the temperature in", "enum": ["celsius", "fahrenheit"]}}, "required": ["city", "state", "unit"]}}}], "tool_choice": "auto", "max_tokens": 256, "logprobs": true, "top_logprobs": 1, "stream": false}'    -P -t
Little benchmark: concurrency 4 seq_len 256
Running command TOKENIZER=unsloth/mistral-7b-instruct-v0.3 ./awscurl -c 4 -N 5 -X POST http://127.0.0.1:8080/invocations --connect-timeout 300 -H 'Content-type: application/json' -d '{"messages": [{"role": "user", "content": "Hi! How are you doing today?"}, {"role": "assistant", "content": "I'm doing well! How can I help you?"}, {"role": "user", "content": "Can you tell me what the temperate will be in Dallas, in fahrenheit?"}], "tools": [{"type": "function", "function": {"name": "get_current_weather", "description": "Get the current weather in a given location", "parameters": {"type": "object", "properties": {"city": {"type": "string", "description": "The city to find the weather for, e.g. 'San Francisco'"}, "state": {"type": "string", "description": "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, "unit": {"type": "string", "description": "The unit to fetch the temperature in", "enum": ["celsius", "fahrenheit"]}}, "required": ["city", "state", "unit"]}}}], "tool_choice": "auto", "max_tokens": 256, "logprobs": true, "top_logprobs": 1, "stream": false}'    -P -t
req {'messages': [{'role': 'user', 'content': 'Hi! How are you doing today?'}, {'role': 'assistant', 'content': "I'm doing well! How can I help you?"}, {'role': 'user', 'content': 'Can you tell me what the temperate will be in Dallas, in fahrenheit?'}], 'tools': [{'type': 'function', 'function': {'name': 'get_current_weather', 'description': 'Get the current weather in a given location', 'parameters': {'type': 'object', 'properties': {'city': {'type': 'string', 'description': "The city to find the weather for, e.g. 'San Francisco'"}, 'state': {'type': 'string', 'description': "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, 'unit': {'type': 'string', 'description': 'The unit to fetch the temperature in', 'enum': ['celsius', 'fahrenheit']}}, 'required': ['city', 'state', 'unit']}}}], 'tool_choice': 'auto', 'max_tokens': 256, 'logprobs': True, 'top_logprobs': 1, 'stream': True}
res: b'{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"role":"assistant","content":""},"logprobs":null,"finish_reason":null}],"prompt_token_ids":null}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"id":"e5LKgCZPZ","type":"function","index":0,"function":{"name":"get_current_weather"}}]},"logprobs":{"content":[{"token":"\\",","logprob":-0.000019073304429184645,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-0.000019073304429184645,"bytes":[34,44]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"{\\"city\\": \\""}}]},"logprobs":{"content":[{"token":"\\"","logprob":-0.000013708974620385561,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-0.000013708974620385561,"bytes":[34]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"D"}}]},"logprobs":{"content":[{"token":"D","logprob":-0.001750366878695786,"bytes":[68],"top_logprobs":[{"token":"D","logprob":-0.001750366878695786,"bytes":[68]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"allas"}}]},"logprobs":{"content":[{"token":"allas","logprob":-0.000011444026313256472,"bytes":[97,108,108,97,115],"top_logprobs":[{"token":"allas","logprob":-0.000011444026313256472,"bytes":[97,108,108,97,115]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"\\",","logprob":-0.00010787858627736568,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-0.00010787858627736568,"bytes":[34,44]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"\\"","logprob":-2.145764938177308e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-2.145764938177308e-6,"bytes":[34]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"state","logprob":-0.00007676783570786938,"bytes":[115,116,97,116,101],"top_logprobs":[{"token":"state","logprob":-0.00007676783570786938,"bytes":[115,116,97,116,101]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"\\":","logprob":-0.00014804698002990335,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-0.00014804698002990335,"bytes":[34,58]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"\\", \\"state\\": \\""}}]},"logprobs":{"content":[{"token":"\\"","logprob":-4.887569048150908e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-4.887569048150908e-6,"bytes":[34]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"TX"}}]},"logprobs":{"content":[{"token":"TX","logprob":-0.0008117241668514907,"bytes":[84,88],"top_logprobs":[{"token":"TX","logprob":-0.0008117241668514907,"bytes":[84,88]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"\\",","logprob":-0.000036954195820726454,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-0.000036954195820726454,"bytes":[34,44]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"\\"","logprob":-5.364403477869928e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-5.364403477869928e-6,"bytes":[34]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"unit","logprob":-1.4305104514278355e-6,"bytes":[117,110,105,116],"top_logprobs":[{"token":"unit","logprob":-1.4305104514278355e-6,"bytes":[117,110,105,116]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"\\":","logprob":-0.0001454247540095821,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-0.0001454247540095821,"bytes":[34,58]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"\\", \\"unit\\": \\""}}]},"logprobs":{"content":[{"token":"\\"","logprob":-7.867782187531702e-6,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-7.867782187531702e-6,"bytes":[34]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"f"}}]},"logprobs":{"content":[{"token":"f","logprob":-0.00010466027742950246,"bytes":[102],"top_logprobs":[{"token":"f","logprob":-0.00010466027742950246,"bytes":[102]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"ahren"}}]},"logprobs":{"content":[{"token":"ahren","logprob":-0.000020265373677830212,"bytes":[97,104,114,101,110],"top_logprobs":[{"token":"ahren","logprob":-0.000020265373677830212,"bytes":[97,104,114,101,110]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"heit"}}]},"logprobs":{"content":[{"token":"heit","logprob":-8.4638240878121e-6,"bytes":[104,101,105,116],"top_logprobs":[{"token":"heit","logprob":-8.4638240878121e-6,"bytes":[104,101,105,116]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"\\"","logprob":-0.00009703165414975956,"bytes":[34],"top_logprobs":[{"token":"\\"","logprob":-0.00009703165414975956,"bytes":[34]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"}}","logprob":-0.00029213930247351527,"bytes":[125,125],"top_logprobs":[{"token":"}}","logprob":-0.00029213930247351527,"bytes":[125,125]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"]","logprob":-0.00008999896090244874,"bytes":[93],"top_logprobs":[{"token":"]","logprob":-0.00008999896090244874,"bytes":[93]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-bc8d894811544ee99a09616ce0098a94","object":"chat.completion.chunk","created":1758065505,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"\\"}"}}]},"logprobs":{"content":[{"token":"</s>","logprob":-0.00306018372066319,"bytes":[60,47,115,62],"top_logprobs":[{"token":"</s>","logprob":-0.00306018372066319,"bytes":[60,47,115,62]}]}]},"finish_reason":"tool_calls","stop_reason":null,"token_ids":null}]}\n\n'
Little benchmark: concurrency 1 seq_len 256
Running command TOKENIZER=unsloth/mistral-7b-instruct-v0.3 ./awscurl -c 1 -N 5 -X POST http://127.0.0.1:8080/invocations --connect-timeout 300 -H 'Content-type: application/json' -d '{"messages": [{"role": "user", "content": "Hi! How are you doing today?"}, {"role": "assistant", "content": "I'm doing well! How can I help you?"}, {"role": "user", "content": "Can you tell me what the temperate will be in Dallas, in fahrenheit?"}], "tools": [{"type": "function", "function": {"name": "get_current_weather", "description": "Get the current weather in a given location", "parameters": {"type": "object", "properties": {"city": {"type": "string", "description": "The city to find the weather for, e.g. 'San Francisco'"}, "state": {"type": "string", "description": "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, "unit": {"type": "string", "description": "The unit to fetch the temperature in", "enum": ["celsius", "fahrenheit"]}}, "required": ["city", "state", "unit"]}}}], "tool_choice": "auto", "max_tokens": 256, "logprobs": true, "top_logprobs": 1, "stream": true}'    -P -t
Little benchmark: concurrency 4 seq_len 256
Running command TOKENIZER=unsloth/mistral-7b-instruct-v0.3 ./awscurl -c 4 -N 5 -X POST http://127.0.0.1:8080/invocations --connect-timeout 300 -H 'Content-type: application/json' -d '{"messages": [{"role": "user", "content": "Hi! How are you doing today?"}, {"role": "assistant", "content": "I'm doing well! How can I help you?"}, {"role": "user", "content": "Can you tell me what the temperate will be in Dallas, in fahrenheit?"}], "tools": [{"type": "function", "function": {"name": "get_current_weather", "description": "Get the current weather in a given location", "parameters": {"type": "object", "properties": {"city": {"type": "string", "description": "The city to find the weather for, e.g. 'San Francisco'"}, "state": {"type": "string", "description": "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, "unit": {"type": "string", "description": "The unit to fetch the temperature in", "enum": ["celsius", "fahrenheit"]}}, "required": ["city", "state", "unit"]}}}], "tool_choice": "auto", "max_tokens": 256, "logprobs": true, "top_logprobs": 1, "stream": true}'    -P -t
