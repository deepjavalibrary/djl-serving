req {'messages': [{'role': 'user', 'content': 'Hi! How are you doing today?'}, {'role': 'assistant', 'content': "I'm doing well! How can I help you?"}, {'role': 'user', 'content': 'Can you tell me what the temperate will be in Dallas, in fahrenheit?'}], 'tools': [{'type': 'function', 'function': {'name': 'get_current_weather', 'description': 'Get the current weather in a given location', 'parameters': {'type': 'object', 'properties': {'city': {'type': 'string', 'description': "The city to find the weather for, e.g. 'San Francisco'"}, 'state': {'type': 'string', 'description': "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, 'unit': {'type': 'string', 'description': 'The unit to fetch the temperature in', 'enum': ['celsius', 'fahrenheit']}}, 'required': ['city', 'state', 'unit']}}}], 'tool_choice': 'auto', 'max_tokens': 256, 'logprobs': True, 'top_logprobs': 1, 'stream': False}
res: b'{"id":"chatcmpl-8ecb89f596db457b873d53ba4584e183","object":"chat.completion","created":1758065227,"model":"lmi","choices":[{"index":0,"message":{"role":"assistant","content":null,"refusal":null,"annotations":null,"audio":null,"function_call":null,"tool_calls":[{"id":"chatcmpl-tool-5dc15f72786744acae734265e275297f","type":"function","function":{"name":"get_current_weather","arguments":"{\\"unit\\": \\"fahrenheit\\", \\"city\\": \\"Dallas\\", \\"state\\": \\"TX\\"}"}}],"reasoning_content":null},"logprobs":{"content":[{"token":"{\\"","logprob":-0.006799772847443819,"bytes":[123,34],"top_logprobs":[{"token":"{\\"","logprob":-0.006799772847443819,"bytes":[123,34]}]},{"token":"name","logprob":-1.5497195136049413e-6,"bytes":[110,97,109,101],"top_logprobs":[{"token":"name","logprob":-1.5497195136049413e-6,"bytes":[110,97,109,101]}]},{"token":"\\":","logprob":-0.00002253030106658116,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-0.00002253030106658116,"bytes":[34,58]}]},{"token":" \\"","logprob":-1.311301275563892e-6,"bytes":[32,34],"top_logprobs":[{"token":" \\"","logprob":-1.311301275563892e-6,"bytes":[32,34]}]},{"token":"get","logprob":-1.4305104514278355e-6,"bytes":[103,101,116],"top_logprobs":[{"token":"get","logprob":-1.4305104514278355e-6,"bytes":[103,101,116]}]},{"token":"_current","logprob":-0.00001597391747054644,"bytes":[95,99,117,114,114,101,110,116],"top_logprobs":[{"token":"_current","logprob":-0.00001597391747054644,"bytes":[95,99,117,114,114,101,110,116]}]},{"token":"_weather","logprob":-0.00001490105023549404,"bytes":[95,119,101,97,116,104,101,114],"top_logprobs":[{"token":"_weather","logprob":-0.00001490105023549404,"bytes":[95,119,101,97,116,104,101,114]}]},{"token":"\\",","logprob":-0.00002455681169521995,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-0.00002455681169521995,"bytes":[34,44]}]},{"token":" \\"","logprob":-0.000020503786799963564,"bytes":[32,34],"top_logprobs":[{"token":" \\"","logprob":-0.000020503786799963564,"bytes":[32,34]}]},{"token":"parameters","logprob":-1.6689286894688848e-6,"bytes":[112,97,114,97,109,101,116,101,114,115],"top_logprobs":[{"token":"parameters","logprob":-1.6689286894688848e-6,"bytes":[112,97,114,97,109,101,116,101,114,115]}]},{"token":"\\":","logprob":-9.536697689327411e-6,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-9.536697689327411e-6,"bytes":[34,58]}]},{"token":" {\\"","logprob":-0.00002312633478140924,"bytes":[32,123,34],"top_logprobs":[{"token":" {\\"","logprob":-0.00002312633478140924,"bytes":[32,123,34]}]},{"token":"unit","logprob":-1.1572270393371582,"bytes":[117,110,105,116],"top_logprobs":[{"token":"unit","logprob":-1.1572270393371582,"bytes":[117,110,105,116]}]},{"token":"\\":","logprob":-2.861018856492592e-6,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-2.861018856492592e-6,"bytes":[34,58]}]},{"token":" \\"","logprob":-5.960462772236497e-7,"bytes":[32,34],"top_logprobs":[{"token":" \\"","logprob":-5.960462772236497e-7,"bytes":[32,34]}]},{"token":"f","logprob":-0.00004351044481154531,"bytes":[102],"top_logprobs":[{"token":"f","logprob":-0.00004351044481154531,"bytes":[102]}]},{"token":"ahrenheit","logprob":-1.311301275563892e-6,"bytes":[97,104,114,101,110,104,101,105,116],"top_logprobs":[{"token":"ahrenheit","logprob":-1.311301275563892e-6,"bytes":[97,104,114,101,110,104,101,105,116]}]},{"token":"\\",","logprob":-7.986990567587782e-6,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-7.986990567587782e-6,"bytes":[34,44]}]},{"token":" \\"","logprob":-3.576278118089249e-7,"bytes":[32,34],"top_logprobs":[{"token":" \\"","logprob":-3.576278118089249e-7,"bytes":[32,34]}]},{"token":"city","logprob":-0.25193923711776733,"bytes":[99,105,116,121],"top_logprobs":[{"token":"city","logprob":-0.25193923711776733,"bytes":[99,105,116,121]}]},{"token":"\\":","logprob":-4.768370445162873e-7,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-4.768370445162873e-7,"bytes":[34,58]}]},{"token":" \\"","logprob":-4.768370445162873e-7,"bytes":[32,34],"top_logprobs":[{"token":" \\"","logprob":-4.768370445162873e-7,"bytes":[32,34]}]},{"token":"Dallas","logprob":-0.0015745873097330332,"bytes":[68,97,108,108,97,115],"top_logprobs":[{"token":"Dallas","logprob":-0.0015745873097330332,"bytes":[68,97,108,108,97,115]}]},{"token":"\\",","logprob":-0.0000295634672511369,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-0.0000295634672511369,"bytes":[34,44]}]},{"token":" \\"","logprob":-1.1920928244535389e-7,"bytes":[32,34],"top_logprobs":[{"token":" \\"","logprob":-1.1920928244535389e-7,"bytes":[32,34]}]},{"token":"state","logprob":0.0,"bytes":[115,116,97,116,101],"top_logprobs":[{"token":"state","logprob":0.0,"bytes":[115,116,97,116,101]}]},{"token":"\\":","logprob":-4.768370445162873e-7,"bytes":[34,58],"top_logprobs":[{"token":"\\":","logprob":-4.768370445162873e-7,"bytes":[34,58]}]},{"token":" \\"","logprob":-1.7881377516459906e-6,"bytes":[32,34],"top_logprobs":[{"token":" \\"","logprob":-1.7881377516459906e-6,"bytes":[32,34]}]},{"token":"TX","logprob":-0.008309553377330303,"bytes":[84,88],"top_logprobs":[{"token":"TX","logprob":-0.008309553377330303,"bytes":[84,88]}]},{"token":"\\"}}","logprob":-4.0531076592742465e-6,"bytes":[34,125,125],"top_logprobs":[{"token":"\\"}}","logprob":-4.0531076592742465e-6,"bytes":[34,125,125]}]},{"token":"<|eom_id|>","logprob":-0.2812897562980652,"bytes":[60,124,101,111,109,95,105,100,124,62],"top_logprobs":[{"token":"<|eom_id|>","logprob":-0.2812897562980652,"bytes":[60,124,101,111,109,95,105,100,124,62]}]}]},"finish_reason":"tool_calls","stop_reason":128008,"token_ids":null}],"service_tier":null,"system_fingerprint":null,"usage":{"prompt_tokens":338,"total_tokens":369,"completion_tokens":31,"prompt_tokens_details":null},"prompt_logprobs":null,"prompt_token_ids":null,"kv_transfer_params":null}\n'
Little benchmark: concurrency 1 seq_len 256
Running command TOKENIZER=unsloth/Meta-Llama-3.1-8B-Instruct ./awscurl -c 1 -N 5 -X POST http://127.0.0.1:8080/invocations --connect-timeout 300 -H 'Content-type: application/json' -d '{"messages": [{"role": "user", "content": "Hi! How are you doing today?"}, {"role": "assistant", "content": "I'm doing well! How can I help you?"}, {"role": "user", "content": "Can you tell me what the temperate will be in Dallas, in fahrenheit?"}], "tools": [{"type": "function", "function": {"name": "get_current_weather", "description": "Get the current weather in a given location", "parameters": {"type": "object", "properties": {"city": {"type": "string", "description": "The city to find the weather for, e.g. 'San Francisco'"}, "state": {"type": "string", "description": "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, "unit": {"type": "string", "description": "The unit to fetch the temperature in", "enum": ["celsius", "fahrenheit"]}}, "required": ["city", "state", "unit"]}}}], "tool_choice": "auto", "max_tokens": 256, "logprobs": true, "top_logprobs": 1, "stream": false}'    -P -t
Little benchmark: concurrency 4 seq_len 256
Running command TOKENIZER=unsloth/Meta-Llama-3.1-8B-Instruct ./awscurl -c 4 -N 5 -X POST http://127.0.0.1:8080/invocations --connect-timeout 300 -H 'Content-type: application/json' -d '{"messages": [{"role": "user", "content": "Hi! How are you doing today?"}, {"role": "assistant", "content": "I'm doing well! How can I help you?"}, {"role": "user", "content": "Can you tell me what the temperate will be in Dallas, in fahrenheit?"}], "tools": [{"type": "function", "function": {"name": "get_current_weather", "description": "Get the current weather in a given location", "parameters": {"type": "object", "properties": {"city": {"type": "string", "description": "The city to find the weather for, e.g. 'San Francisco'"}, "state": {"type": "string", "description": "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, "unit": {"type": "string", "description": "The unit to fetch the temperature in", "enum": ["celsius", "fahrenheit"]}}, "required": ["city", "state", "unit"]}}}], "tool_choice": "auto", "max_tokens": 256, "logprobs": true, "top_logprobs": 1, "stream": false}'    -P -t
req {'messages': [{'role': 'user', 'content': 'Hi! How are you doing today?'}, {'role': 'assistant', 'content': "I'm doing well! How can I help you?"}, {'role': 'user', 'content': 'Can you tell me what the temperate will be in Dallas, in fahrenheit?'}], 'tools': [{'type': 'function', 'function': {'name': 'get_current_weather', 'description': 'Get the current weather in a given location', 'parameters': {'type': 'object', 'properties': {'city': {'type': 'string', 'description': "The city to find the weather for, e.g. 'San Francisco'"}, 'state': {'type': 'string', 'description': "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, 'unit': {'type': 'string', 'description': 'The unit to fetch the temperature in', 'enum': ['celsius', 'fahrenheit']}}, 'required': ['city', 'state', 'unit']}}}], 'tool_choice': 'auto', 'max_tokens': 256, 'logprobs': True, 'top_logprobs': 1, 'stream': True}
res: b'{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"role":"assistant","content":""},"logprobs":null,"finish_reason":null}],"prompt_token_ids":null}\n{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"id":"chatcmpl-tool-3a8a7218b284415b9d7b5e07a0f6375a","type":"function","index":0,"function":{"name":"get_current_weather"}}]},"logprobs":{"content":[{"token":"\\",","logprob":-0.00002455681169521995,"bytes":[34,44],"top_logprobs":[{"token":"\\",","logprob":-0.00002455681169521995,"bytes":[34,44]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"{\\"unit\\": \\""}}]},"logprobs":{"content":[{"token":"f","logprob":-0.00004351044481154531,"bytes":[102],"top_logprobs":[{"token":"f","logprob":-0.00004351044481154531,"bytes":[102]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"f"}}]},"logprobs":{"content":[{"token":"ahrenheit","logprob":-1.311301275563892e-6,"bytes":[97,104,114,101,110,104,101,105,116],"top_logprobs":[{"token":"ahrenheit","logprob":-1.311301275563892e-6,"bytes":[97,104,114,101,110,104,101,105,116]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"ahrenheit\\""}}]},"logprobs":{"content":[{"token":" \\"","logprob":-4.768370445162873e-7,"bytes":[32,34],"top_logprobs":[{"token":" \\"","logprob":-4.768370445162873e-7,"bytes":[32,34]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":", \\"city\\": \\""}}]},"logprobs":{"content":[{"token":"Dallas","logprob":-0.0015745873097330332,"bytes":[68,97,108,108,97,115],"top_logprobs":[{"token":"Dallas","logprob":-0.0015745873097330332,"bytes":[68,97,108,108,97,115]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"Dallas\\""}}]},"logprobs":{"content":[{"token":" \\"","logprob":-1.7881377516459906e-6,"bytes":[32,34],"top_logprobs":[{"token":" \\"","logprob":-1.7881377516459906e-6,"bytes":[32,34]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":", \\"state\\": \\""}}]},"logprobs":{"content":[{"token":"TX","logprob":-0.008309553377330303,"bytes":[84,88],"top_logprobs":[{"token":"TX","logprob":-0.008309553377330303,"bytes":[84,88]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":"TX\\"}"}}]},"logprobs":{"content":[{"token":"\\"}}","logprob":-4.0531076592742465e-6,"bytes":[34,125,125],"top_logprobs":[{"token":"\\"}}","logprob":-4.0531076592742465e-6,"bytes":[34,125,125]}]}]},"finish_reason":null,"token_ids":null}]}\n{"id":"chatcmpl-9fd3451157f847fa94739591383b2f1d","object":"chat.completion.chunk","created":1758065228,"model":"lmi","choices":[{"index":0,"delta":{"tool_calls":[{"index":0,"function":{"arguments":""}}]},"logprobs":{"content":[{"token":"<|eom_id|>","logprob":-0.2812897562980652,"bytes":[60,124,101,111,109,95,105,100,124,62],"top_logprobs":[{"token":"<|eom_id|>","logprob":-0.2812897562980652,"bytes":[60,124,101,111,109,95,105,100,124,62]}]}]},"finish_reason":"tool_calls","stop_reason":128008,"token_ids":null}]}\n\n'
Little benchmark: concurrency 1 seq_len 256
Running command TOKENIZER=unsloth/Meta-Llama-3.1-8B-Instruct ./awscurl -c 1 -N 5 -X POST http://127.0.0.1:8080/invocations --connect-timeout 300 -H 'Content-type: application/json' -d '{"messages": [{"role": "user", "content": "Hi! How are you doing today?"}, {"role": "assistant", "content": "I'm doing well! How can I help you?"}, {"role": "user", "content": "Can you tell me what the temperate will be in Dallas, in fahrenheit?"}], "tools": [{"type": "function", "function": {"name": "get_current_weather", "description": "Get the current weather in a given location", "parameters": {"type": "object", "properties": {"city": {"type": "string", "description": "The city to find the weather for, e.g. 'San Francisco'"}, "state": {"type": "string", "description": "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, "unit": {"type": "string", "description": "The unit to fetch the temperature in", "enum": ["celsius", "fahrenheit"]}}, "required": ["city", "state", "unit"]}}}], "tool_choice": "auto", "max_tokens": 256, "logprobs": true, "top_logprobs": 1, "stream": true}'    -P -t
Little benchmark: concurrency 4 seq_len 256
Running command TOKENIZER=unsloth/Meta-Llama-3.1-8B-Instruct ./awscurl -c 4 -N 5 -X POST http://127.0.0.1:8080/invocations --connect-timeout 300 -H 'Content-type: application/json' -d '{"messages": [{"role": "user", "content": "Hi! How are you doing today?"}, {"role": "assistant", "content": "I'm doing well! How can I help you?"}, {"role": "user", "content": "Can you tell me what the temperate will be in Dallas, in fahrenheit?"}], "tools": [{"type": "function", "function": {"name": "get_current_weather", "description": "Get the current weather in a given location", "parameters": {"type": "object", "properties": {"city": {"type": "string", "description": "The city to find the weather for, e.g. 'San Francisco'"}, "state": {"type": "string", "description": "the two-letter abbreviation for the state that the city is in, e.g. 'CA' which would mean 'California'"}, "unit": {"type": "string", "description": "The unit to fetch the temperature in", "enum": ["celsius", "fahrenheit"]}}, "required": ["city", "state", "unit"]}}}], "tool_choice": "auto", "max_tokens": 256, "logprobs": true, "top_logprobs": 1, "stream": true}'    -P -t
